<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <script type="text/javascript">
    window.onload = onStart;
    function onStart() {
      framemax=0;
    }
    function updateCode(){
    	var ledcount=10;
    	var slen=32;
    	var tb=document.getElementById("textbox")
    	var tline="";
    	//tb.value="anibuff=[];\r\n";
    	for (i=0;i<framemax;i++){
    	  if (!(i%4)) {
    		  tline="leds.map.oEep.write("+address+",[";
    	  }
    		for (j=0;j<ledcount;j++){
    			var cp=document.getElementById("LED"+j+"Frame"+i);
    			var cpv=cp.value;
    			tline+="0x"+(cpv.substring(5,7))+",0x"+(cpv.substring(3,5))+",0x"+(cpv.substring(1,3))+(j+1==ledcount?"":",");
    		}
    		address+=32;
    		if (i%4==3||i==framemax){
      		tline+=",0,0]);\r\n";
      		tb.value+=tline;
      	} else{
      	  tline+=",0,0"; 
      	} 

    	}

    }
    function doIt() {
    	var table=document.getElementById("colTable");
    	var row=table.insertRow(-1);
    	for (k=0;k<7;k++) {
    		var cell=row.insertCell(k);
    		cell.innerHTML='<input type="color" id="LED'+k+'Frame'+framemax+'" onchange="updateCode()" value="'+(framemax?document.getElementById("LED"+k+"Frame"+(framemax-1)).value:"#000000")+'" style="width:20px;">'
    	}
      framemax+=1;
    }
    </script>
  </head>
  <body width="100%;">
  <button onclick="doIt()">Test</button>
<table id="colTable">
</table>

  <textarea id = "textbox" rows="20" cols="80">
  	
  </textarea>
  </body>
</html>

